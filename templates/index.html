<!DOCTYPE html>
<html>
<head>
    <title>AgriAI Crop Advisory</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Font Awesome -->
    <link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

    <style>
        body {
            background: linear-gradient(to right, #e8f5e9, #f1f8e9);
        }

        .main-card {
            border-radius: 15px;
            box-shadow: 0 6px 18px rgba(0,0,0,0.08);
        }

        .title {
            font-weight: 600;
            color: #2e7d32;
        }

        .section-title {
            font-weight: 500;
            margin-top: 25px;
            margin-bottom: 15px;
        }

        .btn-success {
            padding: 10px 35px;
            border-radius: 8px;
            font-weight: 500;
        }
    </style>
</head>

<body>

<div class="container mt-5 mb-5">
    <div class="card main-card p-4">

        <!-- Header -->
        <div class="text-center mb-4">
            <h2 class="title">
                <i class="fas fa-seedling me-2"></i>
                AgriAI Crop Advisory System
            </h2>
        </div>

        <form method="POST">

            <!-- Dropdowns -->
            <div class="row mb-4">

                <div class="col-md-4">
                    <label class="form-label">State</label>
                    <select name="state" class="form-select" required>
                        {% for state in states %}
                            <option value="{{ state }}">{{ state }}</option>
                        {% endfor %}
                    </select>
                </div>

                <div class="col-md-4">
                    <label class="form-label">Crop</label>
                    <select name="crop" class="form-select" required>
                        {% for crop in crops %}
                            <option value="{{ crop }}">{{ crop }}</option>
                        {% endfor %}
                    </select>
                </div>

                <div class="col-md-4">
                    <label class="form-label">Season</label>
                    <select name="season" class="form-select" required>
                        {% for season in seasons %}
                            <option value="{{ season }}">{{ season }}</option>
                        {% endfor %}
                    </select>
                </div>

            </div>

            <!-- Environmental Section -->
            <h5 class="section-title">
                <i class="fas fa-cloud-sun me-2 text-primary"></i>
                Environmental Conditions
            </h5>

            <div class="row mb-4">
                <div class="col-md-3">
                    <input type="number" min="0" step="0.1"
                           name="area" class="form-control"
                           placeholder="Area (hectares)" required>
                </div>

                <div class="col-md-3">
                    <input type="number" min="0" step="0.1"
                           name="rainfall" class="form-control"
                           placeholder="Rainfall (mm)" required>
                </div>

                <div class="col-md-3">
                    <input type="number" min="-5" max="60" step="0.1"
                           name="temperature" class="form-control"
                           placeholder="Temperature (°C)" required>
                </div>

                <div class="col-md-3">
                    <input type="number" min="0" max="100" step="0.1"
                           name="humidity" class="form-control"
                           placeholder="Humidity (%)" required>
                </div>
            </div>

            <!-- Soil Section -->
            <h5 class="section-title">
                <i class="fas fa-flask me-2 text-success"></i>
                Soil & Nutrient Details
            </h5>

            <div class="row mb-4">
                <div class="col-md-3">
                    <input type="number" min="0" step="0.1"
                           name="nitrogen" class="form-control"
                           placeholder="Nitrogen (N)" required>
                </div>

                <div class="col-md-3">
                    <input type="number" min="0" step="0.1"
                           name="phosphorus" class="form-control"
                           placeholder="Phosphorus (P)" required>
                </div>

                <div class="col-md-3">
                    <input type="number" min="0" step="0.1"
                           name="potassium" class="form-control"
                           placeholder="Potassium (K)" required>
                </div>

                <div class="col-md-3">
                    <input type="number" min="0" max="14" step="0.1"
                           name="soil_ph" class="form-control"
                           placeholder="Soil pH (0–14)" required>
                </div>
            </div>

            <!-- Button -->
            <div class="text-center">
                <button type="submit" class="btn btn-success">
                    <i class="fas fa-chart-line me-2"></i>
                    Predict & Analyze
                </button>
            </div>

        </form>

        <!-- Prediction Result -->
        {% if prediction %}
        <div class="alert alert-info mt-5">
            <h5>
                <i class="fas fa-chart-bar me-2"></i>
                Predicted Yield
            </h5>
            Expected yield:
            <strong>{{ prediction }} tons per hectare</strong>
        </div>
        {% endif %}

        <!-- Advisory -->
        {% if advice %}
        <div class="alert alert-warning mt-3">
            <h5>
                <i class="fas fa-lightbulb me-2"></i>
                Advisory Insights
            </h5>
            <ul>
                {% for tip in advice %}
                <li>{{ tip }}</li>
                {% endfor %}
            </ul>
        </div>
        {% endif %}

        <!-- Profit Section -->
        {% if revenue %}
        <div class="alert alert-success mt-3">
            <h5>
                <i class="fas fa-indian-rupee-sign me-2"></i>
                Economic Projection
            </h5>
            Estimated Revenue: ₹ {{ revenue | round(2) }} <br>
            Estimated Profit: ₹ {{ profit | round(2) }}
        </div>
        {% endif %}

    </div>
</div>

</body>
</html>